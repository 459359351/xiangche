(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7736f062"],{"0f69":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"30px"}},[n("div",{staticClass:"app-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.userList,stripe:""}},[n("el-table-column",{attrs:{align:"center",label:"用户名"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.username))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"group_id",align:"center",label:"用户组",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("el-tag",[e._v(e._s(e._f("groupFilter")(i.group_id)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"添加时间"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.create_time))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"权限"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(3===n.role?"普通用户":"超级管理员"))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(1===n.status?"有效":"失效"))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,a=t.$index;return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleEdit(i)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.handleDelete(i,a)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogFormVisible,title:"编辑用户"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"dataForm",attrs:{model:e.tempLine,"label-width":"80px",rules:e.rules,"label-position":"left"}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{attrs:{placeholder:"填写用户名"},model:{value:e.tempLine.username,callback:function(t){e.$set(e.tempLine,"username",t)},expression:"tempLine.username"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{attrs:{placeholder:"填写邮箱"},model:{value:e.tempLine.email,callback:function(t){e.$set(e.tempLine,"email",t)},expression:"tempLine.email"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"用户组"}},[n("el-select",{staticClass:"filter-item",attrs:{placeholder:"用户组选择"},model:{value:e.tempLine.group_id,callback:function(t){e.$set(e.tempLine,"group_id",t)},expression:"tempLine.group_id"}},e._l(e.groupMap,(function(e){return n("el-option",{key:e.id,attrs:{label:e.group_name,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"权限"}},[n("el-select",{staticClass:"filter-item",attrs:{placeholder:"权限选择"},model:{value:e.tempLine.role,callback:function(t){e.$set(e.tempLine,"role",t)},expression:"tempLine.role"}},e._l(e.labelOptions,(function(e){return n("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"是否有效"}},[n("el-select",{staticClass:"filter-item",attrs:{placeholder:"权限选择"},model:{value:e.tempLine.status,callback:function(t){e.$set(e.tempLine,"status",t)},expression:"tempLine.status"}},e._l(e.statusOptions,(function(e){return n("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),1)],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v("确定")])],1)],1)],1)])},a=[],r=n("db72"),l=(n("20d6"),n("c5f6"),n("6762"),n("2fdb"),n("75fc")),s=n("2d63"),o=(n("96cf"),n("3b8d")),u=(n("ac6a"),n("df7c")),c=n.n(u),d=n("c24f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},m=[];Math.easeInOutQuad=function(e,t,n,i){return e/=i/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var f=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function h(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function g(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function v(e,t,n){var i=g(),a=e-i,r=20,l=0;t="undefined"===typeof t?500:t;var s=function e(){l+=r;var s=Math.easeInOutQuad(l,i,a,t);h(s),l<t?f(e):n&&"function"===typeof n&&n()};s()}var b={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&v(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&v(0,800)}}},y=b,_=(n("e498"),n("2877")),w=Object(_["a"])(y,p,m,!1,null,"6af373ef",null),k=w.exports,L={username:"",password:"",confirm_password:"",email:"",role:"",status:"",routes:[]},S=[{key:1,display_name:"管理员"},{key:3,display_name:"普通用户"}],x=[{key:0,display_name:"不生效"},{key:1,display_name:"生效"}],O={1:"网页前台",2:"网页后台",3:"AI",4:"APP",5:"社区",99:"默认组"},$={components:{Pagination:k},filters:{groupFilter:function(e){return O[e]}},data:function(){return{role:Object.assign({},L),routes:[],userList:null,listLoading:!0,dialogFormVisible:!1,dialogType:"new",checkStrictly:!1,labelOptions:S,groupMap:{},defaultProps:{children:"children",label:"title"},statusOptions:x,tempLine:{id:void 0,username:"",email:"",role:"",status:"",create_time:"",group_id:"",password:""},total:0,listQuery:{page:1,limit:10,type:void 0,username:"",sort:"-id"},rules:{username:[{required:!0,message:"username is required",trigger:"blur"}],email:[{required:!0,message:"email is required",trigger:"blur"}]}}},computed:{routesData:function(){return this.routes}},created:function(){this.getList()},methods:{getAllGroupInfo:function(){var e=this;Object(d["e"])().then((function(t){console.log("allgroup",t);var n=[];t.data.forEach((function(e){n=n.concat({id:e.id,group_name:e.group_name})})),e.groupMap=n}))},getList:function(){var e=this;this.listLoading=!0,this.getAllGroupInfo(),Object(d["d"])(this.listQuery).then((function(t){e.userList=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),1e3)}))},getAllUsers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["d"])();case 2:t=e.sent,this.userList=t.data,setTimeout((function(){n.listLoading=!1}),1e3);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),generateRoutes:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",i=[],a=Object(s["a"])(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(!r.hidden){var l=this.onlyOneShowingChild(r.children,r);r.children&&l&&!r.alwaysShow&&(r=l);var o={path:c.a.resolve(n,r.path),title:r.meta&&r.meta.title};r.children&&(o.children=this.generateRoutes(r.children,o.path)),i.push(o)}}}catch(u){a.e(u)}finally{a.f()}return i},generateArr:function(e){var t=this,n=[];return e.forEach((function(e){if(n.push(e),e.children){var i=t.generateArr(e.children);i.length>0&&(n=[].concat(Object(l["a"])(n),Object(l["a"])(i)))}})),n},handleAddRole:function(){this.role=Object.assign({},L),this.$refs.tree&&this.$refs.tree.setCheckedNodes([]),this.dialogType="new",this.dialogVisible=!0},handleEdit:function(e){var t=this;this.tempLine=Object.assign({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},handleDelete:function(e,t){var n=this;this.$confirm("确定删除此用户?","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(d["b"])(e.id);case 2:n.userList.splice(t,1),n.$message({type:"success",message:"删除成功"});case 4:case"end":return i.stop()}}),i)})))).catch((function(e){console.error(e)}))},generateTree:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",i=arguments.length>2?arguments[2]:void 0,a=[],r=Object(s["a"])(e);try{for(r.s();!(t=r.n()).done;){var l=t.value,o=c.a.resolve(n,l.path);l.children&&(l.children=this.generateTree(l.children,o,i)),(i.includes(o)||l.children&&l.children.length>=1)&&a.push(l)}}catch(u){r.e(u)}finally{r.f()}return a},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var n=Object.assign({},e.tempLine);Object(d["c"])(e.tempLine.id,n).then((function(t){if(200===Number(t.code)){var n=e.userList.findIndex((function(t){return t.id===e.tempLine.id}));e.userList.splice(n,1,e.tempLine),e.dialogFormVisible=!1,e.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3})}else e.$notify({title:"Failed",message:t.msg,type:"error",duration:2e3})}))}}))},confirmRole:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,i,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="edit"===this.dialogType,!t){e.next=14;break}return e.next=4,Object(d["c"])(this.role.id,this.role);case 4:n=0;case 5:if(!(n<this.userList.length)){e.next=12;break}if(this.userList[n].key!==this.role.key){e.next=9;break}return this.userList.splice(n,1,Object.assign({},this.role)),e.abrupt("break",12);case 9:n++,e.next=5;break;case 12:e.next=20;break;case 14:return e.next=16,Object(d["a"])(this.role);case 16:i=e.sent,a=i.data,this.role.id=a[0].id,this.userList.push(this.role);case 20:r=this.role.id,this.dialogVisible=!1,this.$notify({title:"提交成功",dangerouslyUseHTMLString:!0,message:"\n            <div>用户id: ".concat(r,"</div>\n          "),type:"success"});case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onlyOneShowingChild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=null,i=e.filter((function(e){return!e.hidden}));return 1===i.length?(n=i[0],n.path=c.a.resolve(t.path,n.path),n):0===i.length&&(n=Object(r["a"])({},t,{path:"",noShowingChildren:!0}),n)}}},j=$,z=(n("e8a0"),Object(_["a"])(j,i,a,!1,null,"36c9f2ae",null));t["default"]=z.exports},"53c7":function(e,t,n){},7456:function(e,t,n){},e498:function(e,t,n){"use strict";var i=n("7456"),a=n.n(i);a.a},e8a0:function(e,t,n){"use strict";var i=n("53c7"),a=n.n(i);a.a}}]);